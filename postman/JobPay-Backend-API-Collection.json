{
  "info": {
    "name": "JobPay Backend API Collection",
    "description": "Complete collection of GraphQL API requests for JobPay Backend\n\n**Base URL:** http://localhost:3000/graphql\n\n**Authentication:** JWT Bearer Token\n\n**Features:**\n- User Registration & Login\n- Profile Management\n- Job Creation & Management\n- Health Check Endpoints\n\n**Setup Instructions:**\n1. Start the JobPay backend server: `pnpm start:dev`\n2. Set environment variables (optional)\n3. Run requests in order for proper authentication flow",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "graphqlUrl",
      "value": "{{baseUrl}}/graphql",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "jobId",
      "value": "",
      "type": "string"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "üè• Health Checks",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            },
            "description": "Basic health check endpoint to verify server status"
          },
          "response": []
        },
        {
          "name": "Health Ready",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health/ready",
              "host": ["{{baseUrl}}"],
              "path": ["health", "ready"]
            },
            "description": "Readiness probe for Kubernetes/Docker deployments"
          },
          "response": []
        },
        {
          "name": "Health Live",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health/live",
              "host": ["{{baseUrl}}"],
              "path": ["health", "live"]
            },
            "description": "Liveness probe for Kubernetes/Docker deployments"
          },
          "response": []
        }
      ],
      "description": "Health check endpoints for monitoring and deployment"
    },
    {
      "name": "üë§ User Authentication",
      "item": [
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Extract user ID for future requests",
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.data && responseJson.data.register) {",
                  "        pm.environment.set('userId', responseJson.data.register.id);",
                  "        console.log('User registered with ID:', responseJson.data.register.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation RegisterUser($input: RegisterUserInput!) { register(input: $input) { id email name role createdAt updatedAt } }\",\n  \"variables\": {\n    \"input\": {\n      \"email\": \"john.doe@example.com\",\n      \"password\": \"securePassword123\",\n      \"name\": \"John Doe\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Register a new user account\n\n**Required Fields:**\n- `email`: Valid email address (unique)\n- `password`: Minimum 6 characters\n\n**Optional Fields:**\n- `name`: User's display name\n\n**Auto Admin:** First user with email `admin@jobpay.com` gets ADMIN role"
          },
          "response": []
        },
        {
          "name": "Register Admin User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Extract user ID for future requests",
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.data && responseJson.data.register) {",
                  "        pm.environment.set('adminUserId', responseJson.data.register.id);",
                  "        console.log('Admin user registered with ID:', responseJson.data.register.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation RegisterUser($input: RegisterUserInput!) { register(input: $input) { id email name role createdAt updatedAt } }\",\n  \"variables\": {\n    \"input\": {\n      \"email\": \"admin@jobpay.com\",\n      \"password\": \"adminPassword123\",\n      \"name\": \"Admin User\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Register admin user - first user with admin@jobpay.com automatically gets ADMIN role"
          },
          "response": []
        },
        {
          "name": "Login User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Extract access token for authenticated requests",
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.data && responseJson.data.login) {",
                  "        pm.environment.set('accessToken', responseJson.data.login.accessToken);",
                  "        pm.environment.set('currentUserId', responseJson.data.login.user.id);",
                  "        console.log('Login successful, token saved');",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation LoginUser($input: LoginInput!) { login(input: $input) { accessToken user { id email name role createdAt updatedAt } } }\",\n  \"variables\": {\n    \"input\": {\n      \"email\": \"john.doe@example.com\",\n      \"password\": \"securePassword123\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Authenticate user and receive JWT access token\n\n**Returns:**\n- `accessToken`: JWT token for authenticated requests\n- `user`: User profile information\n\n**Token Usage:** Add to Authorization header as `Bearer {token}`"
          },
          "response": []
        },
        {
          "name": "Login Admin User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Extract access token for authenticated requests",
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.data && responseJson.data.login) {",
                  "        pm.environment.set('adminAccessToken', responseJson.data.login.accessToken);",
                  "        pm.environment.set('currentAdminId', responseJson.data.login.user.id);",
                  "        console.log('Admin login successful, token saved');",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation LoginUser($input: LoginInput!) { login(input: $input) { accessToken user { id email name role createdAt updatedAt } } }\",\n  \"variables\": {\n    \"input\": {\n      \"email\": \"admin@jobpay.com\",\n      \"password\": \"adminPassword123\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Login as admin user for privileged operations"
          },
          "response": []
        },
        {
          "name": "Get Current User (Me)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"query GetCurrentUser { me { id email name role createdAt updatedAt } }\"\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Get current authenticated user's profile\n\n**Authentication Required:** Yes\n\n**Returns:** Complete user profile of authenticated user"
          },
          "response": []
        }
      ],
      "description": "User registration, authentication, and profile management"
    },
    {
      "name": "üíº Job Management",
      "item": [
        {
          "name": "Get All Jobs",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"query GetAllJobs { jobs { id title description budget status skills isActive createdAt updatedAt posterId poster { id email name role } } }\"\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Retrieve all active jobs with poster information\n\n**Authentication Required:** No\n\n**Returns:** Array of job objects with complete details including poster info"
          },
          "response": []
        },
        {
          "name": "Create Job (Basic)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Extract job ID for future requests",
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.data && responseJson.data.createJob) {",
                  "        pm.environment.set('jobId', responseJson.data.createJob.id);",
                  "        console.log('Job created with ID:', responseJson.data.createJob.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation CreateJob($input: CreateJobInput!) { createJob(input: $input) { id title description budget status skills isActive createdAt updatedAt posterId poster { id email name role } } }\",\n  \"variables\": {\n    \"input\": {\n      \"title\": \"Frontend Developer\",\n      \"description\": \"Looking for an experienced React developer\",\n      \"budget\": 75000,\n      \"skills\": [\"React\", \"TypeScript\", \"CSS\"],\n      \"posterId\": 1\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Create a new job posting\n\n**Authentication Required:** Yes\n\n**Required Fields:**\n- `title`: Job title (minimum 3 characters)\n- `budget`: Job budget (integer)\n- `posterId`: ID of the user posting the job\n\n**Optional Fields:**\n- `description`: Detailed job description\n- `skills`: Array of required skills\n\n**Note:** Update `posterId` to match your user ID"
          },
          "response": []
        },
        {
          "name": "Create Job (Full Stack Developer)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Extract job ID for future requests",
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.data && responseJson.data.createJob) {",
                  "        pm.environment.set('fullStackJobId', responseJson.data.createJob.id);",
                  "        console.log('Full Stack job created with ID:', responseJson.data.createJob.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation CreateJob($input: CreateJobInput!) { createJob(input: $input) { id title description budget status skills isActive createdAt updatedAt posterId poster { id email name role } } }\",\n  \"variables\": {\n    \"input\": {\n      \"title\": \"Full Stack Developer - Remote\",\n      \"description\": \"We are looking for a talented Full Stack Developer to join our remote team. You will be responsible for developing and maintaining web applications using modern technologies. Experience with NestJS, React, and PostgreSQL is highly preferred.\",\n      \"budget\": 120000,\n      \"skills\": [\"NestJS\", \"React\", \"TypeScript\", \"PostgreSQL\", \"GraphQL\", \"Docker\", \"AWS\"],\n      \"posterId\": 1\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Create a comprehensive full-stack developer job posting with detailed requirements"
          },
          "response": []
        },
        {
          "name": "Create Job (Mobile App Developer)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation CreateJob($input: CreateJobInput!) { createJob(input: $input) { id title description budget status skills isActive createdAt updatedAt posterId poster { id email name role } } }\",\n  \"variables\": {\n    \"input\": {\n      \"title\": \"React Native Mobile Developer\",\n      \"description\": \"Seeking an experienced React Native developer to build cross-platform mobile applications. Must have experience with iOS and Android deployment, push notifications, and third-party integrations.\",\n      \"budget\": 95000,\n      \"skills\": [\"React Native\", \"TypeScript\", \"iOS\", \"Android\", \"Firebase\", \"Redux\", \"Jest\"],\n      \"posterId\": 1\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Create a mobile app developer job posting"
          },
          "response": []
        },
        {
          "name": "Create Job (DevOps Engineer)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation CreateJob($input: CreateJobInput!) { createJob(input: $input) { id title description budget status skills isActive createdAt updatedAt posterId poster { id email name role } } }\",\n  \"variables\": {\n    \"input\": {\n      \"title\": \"Senior DevOps Engineer\",\n      \"description\": \"Looking for a Senior DevOps Engineer to manage our cloud infrastructure, implement CI/CD pipelines, and ensure high availability of our systems. Experience with Kubernetes, AWS, and Infrastructure as Code is required.\",\n      \"budget\": 140000,\n      \"skills\": [\"AWS\", \"Kubernetes\", \"Docker\", \"Terraform\", \"CI/CD\", \"GitHub Actions\", \"Monitoring\", \"Linux\"],\n      \"posterId\": 1\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Create a DevOps engineer job posting with comprehensive infrastructure requirements"
          },
          "response": []
        },
        {
          "name": "Create Job (UI/UX Designer)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation CreateJob($input: CreateJobInput!) { createJob(input: $input) { id title description budget status skills isActive createdAt updatedAt posterId poster { id email name role } } }\",\n  \"variables\": {\n    \"input\": {\n      \"title\": \"UI/UX Designer\",\n      \"description\": \"We need a creative UI/UX Designer to create intuitive and engaging user interfaces. You will work closely with our development team to design user-centered digital experiences.\",\n      \"budget\": 65000,\n      \"skills\": [\"Figma\", \"Adobe XD\", \"Sketch\", \"Prototyping\", \"User Research\", \"Wireframing\", \"Design Systems\"],\n      \"posterId\": 1\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Create a UI/UX designer job posting focused on design skills"
          },
          "response": []
        }
      ],
      "description": "Job creation, management, and retrieval operations"
    },
    {
      "name": "üîß Advanced Examples",
      "item": [
        {
          "name": "GraphQL Introspection",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"query IntrospectionQuery { __schema { types { name description fields { name type { name } } } } }\"\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Get complete GraphQL schema information for API exploration"
          },
          "response": []
        },
        {
          "name": "Get Schema Types",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"query GetSchemaTypes { __schema { queryType { name fields { name } } mutationType { name fields { name } } } }\"\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Get available queries and mutations from the GraphQL schema"
          },
          "response": []
        },
        {
          "name": "Create Job with Dynamic Poster ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation CreateJob($input: CreateJobInput!) { createJob(input: $input) { id title description budget status skills isActive createdAt updatedAt posterId poster { id email name role } } }\",\n  \"variables\": {\n    \"input\": {\n      \"title\": \"Backend Developer\",\n      \"description\": \"Looking for a skilled backend developer with NestJS experience\",\n      \"budget\": 85000,\n      \"skills\": [\"NestJS\", \"TypeScript\", \"PostgreSQL\", \"GraphQL\", \"Redis\"],\n      \"posterId\": {{currentUserId}}\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Create job using dynamically set poster ID from login response"
          },
          "response": []
        }
      ],
      "description": "Advanced API examples and schema exploration"
    },
    {
      "name": "üß™ Test Data Examples",
      "item": [
        {
          "name": "Bulk Register Users",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "[\n  {\n    \"query\": \"mutation RegisterUser($input: RegisterUserInput!) { register(input: $input) { id email name role } }\",\n    \"variables\": {\n      \"input\": {\n        \"email\": \"alice@example.com\",\n        \"password\": \"password123\",\n        \"name\": \"Alice Johnson\"\n      }\n    }\n  },\n  {\n    \"query\": \"mutation RegisterUser($input: RegisterUserInput!) { register(input: $input) { id email name role } }\",\n    \"variables\": {\n      \"input\": {\n        \"email\": \"bob@example.com\",\n        \"password\": \"password123\",\n        \"name\": \"Bob Smith\"\n      }\n    }\n  }\n]"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Example of batch GraphQL operations (Note: Requires GraphQL batch support)"
          },
          "response": []
        },
        {
          "name": "Register Test User 1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation RegisterUser($input: RegisterUserInput!) { register(input: $input) { id email name role createdAt } }\",\n  \"variables\": {\n    \"input\": {\n      \"email\": \"alice.johnson@example.com\",\n      \"password\": \"testPassword123\",\n      \"name\": \"Alice Johnson\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Register additional test user for multi-user scenarios"
          },
          "response": []
        },
        {
          "name": "Register Test User 2",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation RegisterUser($input: RegisterUserInput!) { register(input: $input) { id email name role createdAt } }\",\n  \"variables\": {\n    \"input\": {\n      \"email\": \"bob.smith@example.com\",\n      \"password\": \"testPassword123\",\n      \"name\": \"Bob Smith\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Register another test user for scenarios requiring multiple users"
          },
          "response": []
        }
      ],
      "description": "Test data creation and bulk operations for development and testing"
    },
    {
      "name": "‚ùå Error Testing",
      "item": [
        {
          "name": "Invalid Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation LoginUser($input: LoginInput!) { login(input: $input) { accessToken user { id email name role } } }\",\n  \"variables\": {\n    \"input\": {\n      \"email\": \"nonexistent@example.com\",\n      \"password\": \"wrongPassword\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Test login with invalid credentials to verify error handling"
          },
          "response": []
        },
        {
          "name": "Duplicate Email Registration",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation RegisterUser($input: RegisterUserInput!) { register(input: $input) { id email name role } }\",\n  \"variables\": {\n    \"input\": {\n      \"email\": \"john.doe@example.com\",\n      \"password\": \"anotherPassword123\",\n      \"name\": \"John Duplicate\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Test registration with existing email to verify unique constraint error"
          },
          "response": []
        },
        {
          "name": "Unauthorized Access (No Token)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"query GetCurrentUser { me { id email name role } }\"\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Test protected endpoint without authentication token"
          },
          "response": []
        },
        {
          "name": "Invalid Job Data",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"mutation CreateJob($input: CreateJobInput!) { createJob(input: $input) { id title budget } }\",\n  \"variables\": {\n    \"input\": {\n      \"title\": \"X\",\n      \"budget\": \"invalid\",\n      \"posterId\": 999999\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{graphqlUrl}}",
              "host": ["{{graphqlUrl}}"]
            },
            "description": "Test job creation with invalid data to verify validation errors"
          },
          "response": []
        }
      ],
      "description": "Error scenarios and edge cases for testing error handling"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-update environment variables",
          "if (!pm.environment.get('baseUrl')) {",
          "    pm.environment.set('baseUrl', 'http://localhost:3000');",
          "}",
          "",
          "if (!pm.environment.get('graphqlUrl')) {",
          "    pm.environment.set('graphqlUrl', pm.environment.get('baseUrl') + '/graphql');",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script for all requests",
          "pm.test('Response time is reasonable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has correct content type', function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});",
          "",
          "// Log useful information",
          "if (pm.response.code !== 200) {",
          "    console.log('Response Status:', pm.response.code);",
          "    console.log('Response Body:', pm.response.text());",
          "}"
        ]
      }
    }
  ]
}
