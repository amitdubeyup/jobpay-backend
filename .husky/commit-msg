# Conventional commit message validation with verbose output
echo "ğŸ” Validating commit message format..."
pnpm dlx --quiet commitlint --edit ${1} --verbose

# Show additional help if validation fails
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Commit message validation failed!"
  echo ""
  echo "ğŸ“‹ Required format: <type>(<scope>): <description>"
  echo ""
  echo "âœ… Valid types: feat, fix, docs, style, refactor, perf, test, chore, ci, build, revert, security, deps"
  echo ""
  echo "Examples:"
  echo "  âœ… feat(auth): add JWT authentication"
  echo "  âœ… fix(api): resolve user validation bug"
  echo "  âœ… docs: update README installation steps"
  echo ""
  echo "âŒ Common mistakes:"
  echo "  - Type should be lowercase: 'Feat' â†’ 'feat'"
  echo "  - Subject should be lowercase: 'Add Feature' â†’ 'add feature'"
  echo "  - Don't end subject with period: 'fix bug.' â†’ 'fix bug'"
  echo "  - Header too long (max 100 chars)"
  echo ""
  exit 1
fi
