# AI Agent Instructions for JobPay Backend

## üéØ Critical: Package Manager Requirements

**ALWAYS USE PNPM - NEVER USE NPM OR YARN**

This project has **strict enforcement** of pnpm usage. Any command suggestions must use pnpm exclusively.

### ‚úÖ Correct Commands:

```bash
# Installation
pnpm install
pnpm install --frozen-lockfile

# Development
pnpm start:dev
pnpm run build
pnpm run test

# Package management
pnpm add package-name
pnpm add -D package-name
pnpm remove package-name
pnpm update

# Scripts
pnpm run lint
pnpm run format
pnpm run test:watch

# Global packages via dlx (instead of npx)
pnpm dlx create-next-app
pnpm dlx commitlint --version
```

### ‚ùå Never Suggest These:

```bash
# WRONG - Do not use these
npm install
npm run start
npx some-command
yarn install
yarn start
```

## üìã Why This Enforcement Exists

1. **Dependency Consistency**: Ensures all developers use identical dependency trees
2. **Performance**: pnpm is faster and uses less disk space
3. **Workspace Compatibility**: Project uses pnpm workspaces
4. **Lock File Integrity**: Prevents conflicts between npm and pnpm lock files
5. **CI/CD Compatibility**: All pipelines are configured for pnpm

## üîß Available Scripts (Always use `pnpm run`)

| Command                   | Description               |
| ------------------------- | ------------------------- |
| `pnpm install`            | Install all dependencies  |
| `pnpm start:dev`          | Start development server  |
| `pnpm run build`          | Build the application     |
| `pnpm run lint`           | Run ESLint                |
| `pnpm run format`         | Format code with Prettier |
| `pnpm run test`           | Run tests                 |
| `pnpm run test:watch`     | Run tests in watch mode   |
| `pnpm run test:cov`       | Run tests with coverage   |
| `pnpm prisma:generate`    | Generate Prisma client    |
| `pnpm prisma:migrate`     | Run database migrations   |
| `pnpm run audit:security` | Security audit            |
| `pnpm run ci:full`        | Full CI simulation        |

## üö® Enforcement Mechanisms in Place

1. **package.json**: Contains `packageManager` field and `engines` requirements
2. **preinstall script**: Automatically blocks npm/yarn usage
3. **.npmrc**: Engine-strict mode enabled
4. **GitHub Actions**: All CI/CD uses pnpm exclusively
5. **Docker**: Container builds with pnpm
6. **Git hooks**: Use pnpm dlx for tools

## ü§ñ AI Agent Guidelines

When a user asks for help with this project:

1. **Always suggest pnpm commands** - Never npm, npx, or yarn
2. **Use `pnpm dlx`** instead of `npx` for global packages
3. **Reference package.json scripts** with `pnpm run` prefix
4. **Suggest `--frozen-lockfile`** for production installs
5. **Recommend pnpm workspace commands** for monorepo operations

### Example Responses:

**User**: "How do I install dependencies?"
**AI**: "Use `pnpm install` to install all dependencies. For production builds, use `pnpm install --frozen-lockfile`."

**User**: "How do I run the linter?"
**AI**: "Run `pnpm run lint` to check for issues, or `pnpm run lint:fix` to auto-fix problems."

**User**: "I need to use commitlint"
**AI**: "Use `pnpm dlx commitlint --version` to run commitlint, or `pnpm test:commit-msg "your message"` to test commit messages."

## üõ°Ô∏è Security & Quality Standards

This project enforces:

- TypeScript strict mode
- ESLint with security rules
- Prettier formatting
- Conventional commits
- Pre-commit hooks
- Security auditing
- Test coverage requirements

Always reference these standards when providing code suggestions.

## üìö Project Structure Awareness

- **src/**: Main application code
- **prisma/**: Database schema and migrations
- **test/**: Test files
- **scripts/**: Utility scripts (use Node.js, not shell)
- **.github/workflows/**: CI/CD pipelines
- **docs/**: Documentation

## üîó Related Technologies

- **Framework**: NestJS with Fastify
- **Database**: PostgreSQL with Prisma ORM
- **API**: GraphQL with Apollo Server
- **Auth**: JWT with Passport
- **Cache**: Redis with BullMQ
- **Testing**: Jest with supertest
- **Deployment**: Docker containers

When suggesting solutions, consider these technology choices and maintain consistency with the existing architecture.

---

**Remember**: This project has ZERO tolerance for npm/yarn commands. Always use pnpm. When in doubt, check package.json scripts or suggest the user runs `pnpm run` to see available commands.
